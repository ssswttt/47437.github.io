<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å®éªŒæ—¥å¿— #XM-24</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            glow: '#38BDF8',
            dark: '#0F172A',
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'glow-border': 'glowBorder 2s ease-in-out infinite alternate',
            'pulse-glow': 'pulseGlow 1.5s infinite',
            'float-glow': 'floatGlow 3s ease-in-out infinite alternate',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(10px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            glowBorder: {
              '0%': { boxShadow: '0 0 10px rgba(56, 189, 248, 0.5)' },
              '100%': { boxShadow: '0 0 20px rgba(56, 189, 248, 0.8)' },
            },
            pulseGlow: {
              '0%': { boxShadow: '0 0 0 0 rgba(56, 189, 248, 0.5)' },
              '50%': { boxShadow: '0 0 10px 3px rgba(56, 189, 248, 0.8)' },
              '100%': { boxShadow: '0 0 0 0 rgba(56, 189, 248, 0.5)' },
            },
            floatGlow: {
              '0%': { 
                opacity: '0.6', 
                transform: 'translateY(3px)',
                textShadow: '0 0 10px rgba(56, 189, 248, 0.6)' 
              },
              '100%': { 
                opacity: '1', 
                transform: 'translateY(-8px)',
                textShadow: '0 0 25px rgba(56, 189, 248, 0.9)' 
              },
            }
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .bg-grid {
        background-image: linear-gradient(rgba(56, 189, 248, 0.1) 1px, transparent 1px),
                          linear-gradient(90deg, rgba(56, 189, 248, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
      }
      .tech-frame {
        position: relative;
        border: 2px solid rgba(56, 189, 248, 0.5);
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(56, 189, 248, 0.5),
                    inset 0 0 10px rgba(56, 189, 248, 0.2);
        overflow: hidden;
      }
      .tech-frame::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: linear-gradient(90deg, rgba(56, 189, 248, 0) 0%, rgba(56, 189, 248, 0.8) 50%, rgba(56, 189, 248, 0) 100%);
        animation: scanTop 4s linear infinite;
      }
      .tech-frame::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: linear-gradient(90deg, rgba(56, 189, 248, 0) 0%, rgba(56, 189, 248, 0.8) 50%, rgba(56, 189, 248, 0) 100%);
        animation: scanBottom 4s linear infinite;
        animation-delay: 2s;
      }
      @keyframes scanTop {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      @keyframes scanBottom {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      .text-glow {
        text-shadow: 0 0 5px rgba(56, 189, 248, 0.7);
      }
      .loading-dot {
        display: inline-block;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: rgba(56, 189, 248, 0.8);
        margin: 0 2px;
        animation: loadingPulse 1s infinite alternate;
      }
      @keyframes loadingPulse {
        0% { transform: scale(0.8); opacity: 0.5; }
        100% { transform: scale(1.2); opacity: 1; }
      }
      .animate-shake {
        animation: shake 0.5s ease-in-out;
      }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    .fade-out {
      animation: fadeOut 1s ease-in-out forwards;
    }
  </style>
</head>
<body class="bg-dark text-gray-200 min-h-screen bg-grid overflow-x-hidden">
  <header class="flex justify-between items-center p-4">
    <button id="back-btn" class="text-gray-300 hover:text-glow transition-colors flex items-center gap-2 text-lg">
      <i class="fa fa-arrow-left"></i>
      <span>è¿”å›</span>
    </button>
    <h1 class="text-2xl font-bold text-white text-glow">å®éªŒæ—¥å¿— #XM-24</h1>
  </header>

  <div id="lock-alert-modal" class="fixed inset-0 flex items-center justify-center z-50">
    <div class="tech-frame max-w-xl w-full p-8 animate-fade-in">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-white flex items-center text-glow">
          <i class="fa fa-shield text-glow mr-3"></i>
          å®éªŒæ—¥å¿—å°é”è­¦æŠ¥
        </h2>
        <button id="close-modal" class="text-gray-400 hover:text-white transition-colors">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <p class="text-white leading-relaxed text-glow text-lg">
        ä½ ç½®èº«äºã€Œæ˜Ÿå°˜ä¸ƒå·ã€æœªæ¥ç§‘æŠ€å®éªŒå®¤æ ¸å¿ƒå¯†å®¤ï¼Œå†°å†·çš„é‡‘å±å£æ³›ç€å¹½è“é‡å­è¾‰å…‰ï¼Œæ§åˆ¶å°çº¹è·¯é—´æµè½¬ç€æ•°æ®æµã€‚æ—è¾¹æ‘Šå¼€çš„å®éªŒæ‰‹è®°è¾¹ç¼˜å·æ›²ï¼ŒDr. Zero æ½¦è‰å­—è¿¹è®°è½½ç€ã€Œèƒ½é‡æ ¸å¿ƒå¯åŠ¨å¯†é’¥ã€â€”â€” éœ€ç”¨å®éªŒå®¤æ•£è½çš„æœ‰ç†æ•°çº¿ç´¢ç®—å‡ºç­”æ¡ˆï¼Œå¦åˆ™é€æ¸å¢å¼ºçš„ç£åŠ›åœºå°†æŠŠä¸€åˆ‡ç¢¾ä¸ºç²‰æœ«ã€‚<br><br>
        å®éªŒæ—¥å¿—æ ¸å¿ƒæ¨¡å—è¢«ç³»ç»Ÿ**é‡å­é”**è‡ªåŠ¨å°é”ã€‚æ ¹æ®ã€Šæ˜Ÿå°˜å®éªŒå®¤å®‰å…¨åè®®ç¬¬7æ¡ã€‹ï¼Œä»…èƒ½é€šè¿‡ç ”ç©¶å‘˜é—ç•™çš„æ•°å­¦å¯†ä»¤è§£å¯†ã€‚<br><br>
        è¿™äº›åŠ å¯†æ•°æ®æ˜¯è§£æâ€œæ˜Ÿå°˜è®¡åˆ’å¼‚å¸¸â€çš„å…³é”®ï¼Œç ´è§£åå°†è·å¾—é€ƒç¦»å¯†å®¤çš„æ ¸å¿ƒçº¿ç´¢ã€‚
      </p>
      <button id="unlock-puzzle" class="w-full bg-glow hover:bg-blue-400 text-dark font-medium py-3 px-6 rounded transition-colors mt-6 text-lg animate-glow-border">
        è§£é”æ•°å­¦å¯†ä»¤
      </button>
    </div>
  </div>

  <div id="decoding-text" class="fixed inset-0 flex items-center justify-center z-40">
    <p class="text-white text-2xl font-mono text-glow animate-float-glow">
      å®éªŒå®¤ä¸»å±å¹•é—ªè¿‡å¹½è“è¾‰å…‰ï¼Œå®éªŒæ—¥å¿—çš„é‡å­åŠ å¯†æµæ­£è¢«ç¼“ç¼“è§£ç ...
    </p>
  </div>

  <main id="puzzle-content" class="hidden container mx-auto px-4 py-8">
    <div class="tech-frame mx-auto w-3/4 p-8 mb-8 animate-fade-in">
      <h2 class="text-2xl font-bold text-white mb-6 flex items-center text-glow">
        <i class="fa fa-key text-glow mr-3"></i>
        ã€æ˜Ÿå°˜è®¡åˆ’Â·åŠ å¯†æ—¥å¿—ã€‘
      </h2>
      <div id="api-content" class="text-white leading-relaxed text-lg">
        <div id="loading-state" class="text-center py-8">
          <p class="mb-4">æ­£åœ¨ä»é‡å­åŠ å¯†æµåŠ è½½å®éªŒæ—¥å¿—...</p>
          <div class="flex justify-center">
            <span class="loading-dot"></span>
            <span class="loading-dot" style="animation-delay: 0.2s"></span>
            <span class="loading-dot" style="animation-delay: 0.4s"></span>
          </div>
        </div>
        <div id="success-state" class="hidden"></div>
        <div id="error-state" class="hidden text-red-400"></div>
      </div>
    </div>

    <div class="tech-frame mx-auto w-3/4 p-6 animate-fade-in" style="animation-delay: 0.5s">
      <div class="mb-6">
        <label for="answer-input" class="block text-white mb-3 text-lg">è¯·è¾“å…¥ã€Œèƒ½é‡æ ¸å¿ƒå¯åŠ¨å¯†é’¥ã€çš„æ•°å€¼</label>
        <input 
          type="text" 
          id="answer-input" 
          class="w-full bg-dark border border-glow/50 rounded py-3 px-4 text-white text-lg focus:outline-none focus:animate-pulse-glow"
          placeholder="è¾“å…¥å¯†é’¥æ•°å€¼"
        >
      </div>
      <button id="submit-answer" class="w-full bg-primary hover:bg-primary/80 text-white font-medium py-3 px-6 rounded transition-colors text-lg flex items-center justify-center gap-2">
        <i class="fa fa-transmit text-xl"></i>
        æäº¤å¯†é’¥ï¼Œè§£é”æ—¥å¿—
      </button>
    </div>
  </main>

  <!-- ã€æ–°å¢1/3ã€‘ChatSDKåŠ è½½å¤±è´¥å¤‡ç”¨æŒ‰é’® -->
  <div id="chat-retry-btn">
    <i class="fa fa-comment-dots"></i>
  </div>

  <!-- ã€æ–°å¢2/3ã€‘å¼•å…¥ç‹¬ç«‹çš„ChatSDK JSæ–‡ä»¶ -->
  <script src="chat-sdk.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const lockAlertModal = document.getElementById('lock-alert-modal');
      const closeModalBtn = document.getElementById('close-modal');
      const unlockPuzzleBtn = document.getElementById('unlock-puzzle');
      const decodingText = document.getElementById('decoding-text');
      const puzzleContent = document.getElementById('puzzle-content');
      const backBtn = document.getElementById('back-btn');
      const apiContent = document.getElementById('api-content');
      const loadingState = document.getElementById('loading-state');
      const successState = document.getElementById('success-state');
      const errorState = document.getElementById('error-state');

      decodingText.classList.add('hidden');
      puzzleContent.classList.add('hidden');

      function closeModal() {
        lockAlertModal.classList.add('hidden');
        decodingText.classList.remove('hidden');
        setTimeout(() => {
          decodingText.classList.add('hidden');
          puzzleContent.classList.remove('hidden');
          fetchCozeAPI(); // è°ƒç”¨APIå¤„ç†å‡½æ•°
        }, 3000);
      }

      closeModalBtn.addEventListener('click', closeModal);
      unlockPuzzleBtn.addEventListener('click', closeModal);

      backBtn.addEventListener('click', () => {
        window.location.href = 'mishi.html';
      });

      // è‡ªå®šä¹‰æ¢è¡Œç¬¦å¤„ç†å‡½æ•°ï¼š2ä¸ª\nâ†’æ™®é€šæ¢è¡Œï¼Œ3ä¸ª\nâ†’ç©ºè¡Œ
      function formatLineBreaks(text) {
        if (!text) return '';
        // 1. å…ˆå¤„ç†3ä¸ª\nï¼ˆæ›¿æ¢ä¸ºâ€œæ¢è¡Œ+ç©ºè¡Œâ€ï¼Œå³2ä¸ª<br>ï¼‰
        text = text.replace(/\n{3}/g, '<br><br>');
        // 2. å†å¤„ç†2ä¸ª\nï¼ˆæ›¿æ¢ä¸ºæ™®é€šæ¢è¡Œï¼Œå³1ä¸ª<br>ï¼‰
        text = text.replace(/\n{2}/g, '<br>');
        // 3. æœ€åå¤„ç†æ®‹ç•™çš„å•ä¸ª\nï¼ˆç»Ÿä¸€æ›¿æ¢ä¸ºæ™®é€šæ¢è¡Œï¼Œé¿å…é—æ¼ï¼‰
        text = text.replace(/\n/g, '<br>');
        return text;
      }

      async function fetchCozeAPI() {
        const apiUrl = 'https://api.coze.cn/v1/workflow/stream_run';
        const token = 'sat_ZUvu7vrte22QySxTNgbO2PXp1xo5jJGOF8CaxtclU6NqxKBYZirfGVxdU6ir0Nik';
        const workflowId = '7559400360063221775';
        const appId = '7556860834094923830';
        
        // å…³é”®ä¿®æ”¹ï¼šä»localStorageè¯»å–çŸ¥è¯†ç‚¹ï¼Œé»˜è®¤å€¼ä¸ºâ€œæœ‰ç†æ•°â€
        const inputKnowledge = localStorage.getItem('mathKnowledge') || 'æœ‰ç†æ•°'; 

        try {
            const requestBody = {
                workflow_id: workflowId,
                app_id: appId,
                parameters: {
                    input: inputKnowledge // ä½¿ç”¨è¯»å–åˆ°çš„çŸ¥è¯†ç‚¹
                }
            };

            console.log('ğŸ”µ Coze API è¯·æ±‚å‚æ•°:', requestBody);

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestBody)
            });

            if (!response.ok) {
                throw new Error(`APIè¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š${response.status}`);
            }

            const reader = response.body.getReader();
            const decoder = new TextDecoder();
            let outputContent = null;
            let incompleteChunk = '';

            loadingState.classList.remove('hidden');
            successState.classList.add('hidden');
            errorState.classList.add('hidden');

            while (true) {
                const { done, value } = await reader.read();
                if (done) break;

                let chunk = decoder.decode(value, { stream: true });
                if (incompleteChunk) {
                    chunk = incompleteChunk + chunk;
                    incompleteChunk = '';
                }

                const lines = chunk.split('\n');
                if (!chunk.endsWith('\n') && lines.length > 0) {
                    incompleteChunk = lines.pop() || '';
                }

                for (const line of lines) {
                    const trimmed = line.trim();
                    if (!trimmed) continue;

                    if (trimmed.startsWith('data:')) {
                        const data = trimmed.substring('data:'.length).trim();
                        try {
                            const messageData = JSON.parse(data);
                            console.log('ğŸ”µ è§£æåˆ°çš„messageData:', messageData);
                            
                            // ä¼˜å…ˆä» messageData.content ä¸­è§£æ output
                            if (messageData.content) {
                                try {
                                    const contentJson = JSON.parse(messageData.content);
                                    if (contentJson.output) {
                                        outputContent = contentJson.output;
                                        console.log('ğŸ”µ ä»contentä¸­è§£æåˆ°output:', outputContent);
                                        reader.cancel(); // æ‹¿åˆ°outputåç»ˆæ­¢è¯»å–
                                        break;
                                    }
                                } catch (contentParseErr) {
                                    console.error('ğŸ”´ è§£æcontentå†…çš„JSONå¤±è´¥:', contentParseErr);
                                }
                            }
                            
                            // å¤‡ç”¨ï¼šç›´æ¥ä»messageDataå–outputï¼ˆå…¼å®¹æ—§æ ¼å¼ï¼‰
                            if (!outputContent && messageData.output) {
                                outputContent = messageData.output;
                                console.log('ğŸ”µ ç›´æ¥ä»messageDataå–åˆ°output:', outputContent);
                                reader.cancel();
                                break;
                            }
                        } catch (err) {
                            console.error('ğŸ”´ è§£æmessageDataå¤±è´¥:', err);
                        }
                    }
                }
                if (outputContent) break; // å·²æœ‰æœ‰æ•ˆoutputï¼Œé€€å‡ºå¾ªç¯
            }

            // å¤„ç†æœ€åå¯èƒ½çš„ä¸å®Œæ•´chunk
            if (incompleteChunk && !outputContent) {
                if (incompleteChunk.startsWith('data:')) {
                    const data = incompleteChunk.substring('data:'.length).trim();
                    try {
                        const messageData = JSON.parse(data);
                        console.log('ğŸ”µ æœ€åchunkè§£æçš„messageData:', messageData);
                        
                        if (messageData.content) {
                            try {
                                const contentJson = JSON.parse(messageData.content);
                                if (contentJson.output) {
                                    outputContent = contentJson.output;
                                    console.log('ğŸ”µ æœ€åchunkä»contentè§£æåˆ°output:', outputContent);
                                }
                            } catch (contentParseErr) {
                                console.error('ğŸ”´ æœ€åchunkè§£æcontentå†…çš„JSONå¤±è´¥:', contentParseErr);
                            }
                        }
                        
                        if (!outputContent && messageData.output) {
                            outputContent = messageData.output;
                            console.log('ğŸ”µ æœ€åchunkç›´æ¥ä»messageDataå–åˆ°output:', outputContent);
                        }
                    } catch (err) {
                        console.error('ğŸ”´ è§£ææœ€åæ•°æ®å¤±è´¥:', err);
                    }
                }
            }

            console.log('ğŸ”µ æœ€ç»ˆè¦æ¸²æŸ“çš„outputContent:', outputContent);
            // æ¸²æŸ“ç»“æœ
            loadingState.classList.add('hidden');
            if (outputContent) {
                // æ ¼å¼åŒ–è¾“å‡ºï¼šè‡ªå®šä¹‰æ¢è¡Œç¬¦å¤„ç† + æ¸…ç†é¦–å°¾å¼•å·
                const formattedOutput = formatLineBreaks(outputContent)
                    .replace(/^"|"$/g, ''); // æ¸…ç†é¦–å°¾å¼•å·
                successState.innerHTML = formattedOutput;
                successState.classList.remove('hidden');
            } else {
                // å…œåº•å†…å®¹ï¼ˆåŠ¨æ€é€‚é…å½“å‰çŸ¥è¯†ç‚¹ï¼‰
                successState.innerHTML = `
    <p class="text-gray-300 text-sm space-y-2" id="math-content">
        <div class="flex justify-center">
            <i class="fa fa-microchip text-xl mb-2 block text-primary"></i>
        </div>
        ã€çº¿ç´¢ 1ï¼šæ§åˆ¶å°æ•°æ®å±ã€‘ä¸‰åˆ—æ»šåŠ¨${inputKnowledge}ç›¸å…³æ•°æ®ï¼Œæ¯åˆ—4ä¸ªæ•°å­—ï¼ˆä½ç½®ç¼–å·â‘ â‘¡â‘¢â‘£ï¼‰ï¼š<br>
        ç¬¬ä¸€åˆ—ï¼šâ‘ -5ï¼Œâ‘¡3ï¼Œâ‘¢-12ï¼Œâ‘£7ï¼›<br>
        ç¬¬äºŒåˆ—ï¼šâ‘ |-8|ï¼Œâ‘¡-2Â²ï¼Œâ‘¢âˆš16ï¼Œâ‘£-3ï¼›<br>
        ç¬¬ä¸‰åˆ—ï¼šâ‘ -1/2çš„å€’æ•°ï¼Œâ‘¡(-1)Â²â°Â²âµï¼Œâ‘¢0.25çš„å€’æ•°ï¼Œâ‘£9ï¼›<br><br>
        ã€çº¿ç´¢ 2ï¼šå®éªŒæ‰‹è®°Â·é¡µ1ã€‘ã€Œèƒ½é‡æµè½¬éœ€éµå¾ªã€ç»´åº¦é€‰æ•°æ³•åˆ™ã€ï¼šæ¯åˆ—å„é€‰1ä¸ªæ•°ï¼Œä¸”æ‰€é€‰æ•°å­—çš„**åˆ—å†…ä½ç½®ä¸å¯é‡å¤**ï¼ˆå¦‚ç¬¬ä¸€åˆ—é€‰â‘ ï¼Œç¬¬äºŒåˆ—ä¸å¯é€‰â‘ ï¼‰ã€‚ã€<br><br>
        ã€çº¿ç´¢ 3ï¼šå®éªŒæ‰‹è®°Â·é¡µ2ã€‘ã€Œé€‰ä¸­çš„3ä¸ªæ•°ï¼Œéœ€é€šè¿‡å››åˆ™è¿ç®—ã€ä¹˜æ–¹ï¼ˆåº•æ•°/æŒ‡æ•°ä¸ºé€‰ä¸­æ•°æˆ–å…¶è¿ç®—å¾—åˆ°çš„æ•´æ•°ï¼‰ã€ç»å¯¹å€¼å…³è”ï¼Œè¿ç®—éœ€ä½“ç°ã€é‡å­çº§ä¼˜å…ˆçº§ã€ï¼ˆè‡³å°‘ä¸¤ç§ä¼˜å…ˆçº§ï¼Œä¸”æ¶‰åŠæ­£è´Ÿå·è½¬æ¢ï¼‰ã€‚æ¯ä¸ªæ•°**ä»…èƒ½ä½¿ç”¨ä¸€æ¬¡**ã€‚ã€<br><br>
        ã€çº¿ç´¢ 4ï¼šæ§åˆ¶å°åˆ»ç—•ã€‘æ¨¡ç³Šç¬¦å·æ³¨è§£ï¼šã€Œ|a|èƒå–ã€æ˜¾æ€§å€¼ã€ï¼Œ(-b)â¿å¼•å‘ã€ç¬¦å·æ¶Ÿæ¼ªã€ï¼Œè§„é¿æ— æ„ä¹‰é›¶å¾ªç¯ã€‚ã€
    </p>
`;
                successState.classList.remove('hidden');
            }

        } catch (error) {
            errorState.innerHTML = 'å®éªŒæ—¥å¿—åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
            loadingState.classList.add('hidden');
            errorState.classList.remove('hidden');
            console.error('ğŸ”´ APIè¯·æ±‚é”™è¯¯ï¼š', error);
        }
      }

      const submitAnswerBtn = document.getElementById('submit-answer');
      submitAnswerBtn.addEventListener('click', () => {
        const answer = document.getElementById('answer-input').value.trim();
        if (!answer) {
          alert('è¯·è¾“å…¥å¯†é’¥æ•°å€¼');
          return;
        }
        if (answer === '24') {
          // åˆ›å»ºéªŒè¯æˆåŠŸçš„æç¤ºå±‚
          const successOverlay = document.createElement('div');
          successOverlay.className = 'fixed inset-0 flex items-center justify-center z-50 bg-dark/80';
          successOverlay.innerHTML = `
            <div class="tech-frame p-8 text-center">
              <h3 class="text-2xl font-bold text-white text-glow mb-4">å¯†é’¥éªŒè¯æˆåŠŸ</h3>
              <p class="text-white mb-6">æ­£åœ¨åŠ è½½å…³é”®ä¿¡æ¯...</p>
              <div class="flex justify-center">
                <span class="loading-dot"></span>
                <span class="loading-dot" style="animation-delay: 0.3s"></span>
                <span class="loading-dot" style="animation-delay: 1s"></span>
              </div>
            </div>
          `;
          document.body.appendChild(successOverlay);
          // è§¦å‘é¡µé¢æ¸éšåŠ¨ç”»
          document.body.classList.add('fade-out');
          // åŠ¨ç”»ç»“æŸåè·³è½¬
          setTimeout(() => {
            window.location.href = 'guanjian.html';
          }, 1000);
        } else {
          // é”™è¯¯å¤„ç†ï¼šè¾“å…¥æ¡†æŠ–åŠ¨
          const inputEl = document.getElementById('answer-input');
          inputEl.classList.add('animate-shake');
          setTimeout(() => {
            inputEl.classList.remove('animate-shake');
          }, 500);
          alert('å¯†é’¥é”™è¯¯ï¼Œç£åŠ›åœºæ³¢åŠ¨åŠ å‰§ï¼è¯·é‡æ–°è®¡ç®—');
        }
      });

      // ã€æ–°å¢3/3ã€‘åˆå§‹åŒ–ChatSDKï¼Œé€‚é…é¡µé¢ä¸»è‰²#165DFFï¼ˆæ˜Ÿé™…å¯†å®¤ç»Ÿä¸€ä¸»è‰²ï¼‰
      new FloatingChatSDK({
        appId: "7551596535822958646",
        workflowId: "7560369410436513828",
        token: "sat_ZUvu7vrte22QySxTNgbO2PXp1xo5jJGOF8CaxtclU6NqxKBYZirfGVxdU6ir0Nik",
        primaryColor: "#165DFF" // åŒ¹é…é¡µé¢primaryè‰²ï¼Œä¸æ˜Ÿé™…å¯†å®¤å…¶ä»–é¡µé¢è§†è§‰ç»Ÿä¸€
         
      });
    });
  </script>

</body>
</html>